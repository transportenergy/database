# N.B. this file configures Travis to test *both* the Python and R item codes.
#
# References:
# - The Travis documentation: https://docs.travis-ci.com/
# - Example .travis.yml for a popular R package:
#   https://github.com/tidyverse/ggplot2/blob/master/.travis.yml
# - The community-developed R support for Travis:
#   - https://github.com/travis-ci/travis-build , in particular the file:
#     lib/travis/build/script/r.rb
#   - Example output: https://travis-ci.org/tidyverse/ggplot2/jobs/232365761

dist: xenial

language: r

cache:
  directories:
    - $HOME/.cache/pip
    - $HOME/R/Library

python:
  - 3.7

r: release

before_install:
  - Rscript -e "install.packages(c('devtools', 'IRkernel'), lib='$R_LIBS_USER')"

install:
  - pip install python/
  - pip install -r ci/requirements.txt
  - Rscript -e 'devtools::install("R/itemrixmp", dep = T)'

script:
   - py.test python/item --cov=item --cov-report term-missing
   - R CMD check R/item

after_success:
  - coverage combine
  - codecov

notifications:
  email: false
